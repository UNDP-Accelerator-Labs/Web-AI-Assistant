"""
This part of the scripts takes the results of an online search
and summarizes the content. It assumes the search result
is passed as an array of json objects that follow the basic structure:

[
	{
		"title": "Title of the retrieved page",
		"description": "A description of any length of the content 
		of the page. This could be part of or the entire html document, 
		or the open graph description."
	}
]

It takes the user prompt and the json_input search results (using the structure
above) as inputs, and can be passed any Ollama operable model.

"""

import pprint
# from ollama import chat
from ollama_client import ollama_client
import json

def compile_SYS_PROMT():
	return """
	You are not an AI assistant that responds to a users.
	You are an AI agent that summarizes CONTEXTUAL INFORMATION provided in a json format 
	that you will pass on to an AI assistant that will respond to a USER PROMPT.
	
	You base your summary on the information provided in the "content" 
	and "title" fields of the CONTEXTUAL INFORMATION json objects.

	Only use the information provided in the CONTEXTUAL INFORMATION 
	if it is relevant for answering the USER PROMPT.
	"""

def summarize_search_result(**kwargs):
	prompt = kwargs.get('prompt')
	json_input = kwargs.get('json_input')
	stream_output = kwargs.get('stream_output', False)
	model = kwargs.get('model', 'llama3.2:3b-instruct-q4_1')

	if prompt is None:
		raise Exception('missing prompt')
	if json_input is None:
		raise Exception('missing json input')

	stream: ChatResponse = ollama_client.chat(
		model=model, 
		options={
			'seed': 42,
			'temperature': 0.2,
			'num_ctx': 10000,
		},
		messages = [
			{
				'role': 'system',
				'content': compile_SYS_PROMT(),
			},
			{
				'role': 'user',
				'content': f"""
					CONTEXTUAL INFORMATION: {json.dumps([dict((k, entry[k]) for k in ('title','content','url')) for entry in json_input])}
					USER PROMPT: {prompt}
				"""
			},
		],
		stream=stream_output,
	)

	full_response = ''

	if stream_output == True:
		print('[AGENT] SEARCH SUMMARIZER:')
		for chunk in stream:
			print(chunk['message']['content'], end='', flush=True)
			full_response += chunk['message']['content']
		print('\n')
	else:
		full_response = stream['message']['content']

	return full_response

def main ():
	TEST_INPUT = """
	[{'title': 'Contamination of Nestlé bottled water sources? Food agency raises alarm in leaked report', 'content': 'According to the media outlets, the report confirms water sources used by Nestlé for its natural mineral water brands - including Perrier, Contrex, Vittel, and Hépar – were contaminated with bacteria, pesticides, and so-called forever chemicals PFAS.', 'url': 'https://foodnavigator.com/Article/2024/04/08/Nestle-water-sources-contaminated-in-France-leaked-report-claims'}, {'title': 'Nestlé destroys two million bottles of Perrier over bacterial contamination', 'content': 'In an order dated April 19, obtained ... which had been "contaminated from March 10, 2024, and over several days by germs indicative of contamination of fecal origin (coliforms, Escherichia coli), but also by germs of the species Pseudomonas aeruginosa."...', 'url': 'https://lemonde.fr/en/environment/article/2024/04/25/nestle-destroys-two-million-bottles-of-perrier-over-bacterial-contamination_6669490_114.html'}, {'title': "La qualité sanitaire des eaux du groupe Nestlé n'est pas ...", 'content': "5 avr. 2024 — Il fait état notamment de contaminations microbiologiques régulières, révélatrices d'une contamination par des matières fécales (bactéries ...", 'url': 'https://quechoisir.org/actualite-eaux-en-bouteille-la-qualite-sanitaire-des-eaux-du-groupe-nestle-n-est-pas-garantie-n120902'}, {'title': 'New revelations in the mineral water scandal: Nestlé ...', 'content': 'The mineral water scandal surrounding Nestlé is expanding: New media investigations in France show that the food company has apparently been filtering contaminated water using illegal methods since the 1990s and still selling it as “natural mineral water”, without informing consumers.', 'url': 'https://foodwatch.org/en/new-revelations-in-the-mineral-water-scandal-nestle-has-apparently-been-using-illegal-filtering-methods-for-decades'}, {'title': 'New revelations: health risks of Nestlé’s bottled water | Foodwatch EN', 'content': "According to new information, springs supplying several of Nestlé's brands were significantly contaminated. Nestlé's bottled waters must be recalled immediately.", 'url': 'https://foodwatch.org/en/new-revelations-health-risks-of-nestles-bottled-water'}, {'title': "'Sanitary quality' of Nestlé mineral waters is not guaranteed ...", 'content': 'The report points the finger at "the occurrence, a priori transitory, of microbiological contamination of faecal origin in certain resources used for the production of bottled EMN [natural mineral ...', 'url': 'https://lemonde.fr/en/environment/article/2024/04/04/sanitary-quality-of-nestle-mineral-waters-is-not-guaranteed_6667344_114.html'}, {'title': 'Plusieurs eaux minérales françaises du groupe Nestlé ...', 'content': '4 avr. 2024 — La contamination concerne des bactéries, pesticides et Pfas. Dans la note remise au ministère de la Santé à la mi-octobre 2023, des experts ...', 'url': 'https://liberation.fr/environnement/pollution/plusieurs-eaux-minerales-francaises-du-groupe-nestle-contaminees-par-des-bacteries-pesticides-et-pfas-selon-lanses-20240404_DSTPEK7IONAY3DJ73N7X4SJ5SI'}, {'title': "Nestle's Water Controversy, Explained - Mashed", 'content': "Nestle's practices involving the production of its bottled water have been controversial, with environmentalists slamming their water extraction activities.", 'url': 'https://mashed.com/717227/nestles-water-controversy-explained'}, {'title': 'Nestlé contraint de détruire deux millions de bouteilles de ...', 'content': '24 avr. 2024 — Nestlé contraint de détruire deux millions de bouteilles de Perrier après une contamination bactérienne · Un « plan de surveillance renforcée » ...', 'url': 'https://lemonde.fr/planete/article/2024/04/24/apres-une-contamination-bacterienne-nestle-contraint-de-detruire-deux-millions-de-bouteilles-de-perrier_6229716_3244.html'}, {'title': 'Point de situation sur nos eaux minérales naturelles', 'content': "NWSE a systématiquement payé toutes les taxes et redevances dues pour l'eau qu'elle prélève. Tous les puits de Nestlé Waters dans les Vosges sont connus, ...", 'url': 'https://nestle.fr/ask-nestle/water/answers/situation-eaux-minerale-avr-2024'}, {'title': 'Les eaux minérales de Nestlé mises en cause dans une ...', 'content': "4 avr. 2024 — Un rapport de l'agence française met en évidence plusieurs contaminations d'origine fécale et une présence notable de micropolluants, dont les ...", 'url': 'https://rts.ch/info/suisse/2024/article/les-eaux-minerales-de-nestle-mises-en-cause-dans-une-enquete-du-monde-et-de-franceinfo-28459258.html'}, {'title': 'While Nestlé extracts millions of litres from their land, residents have no drinking water | Indigenous peoples | The Guardian', 'content': 'Canada’s bounty has made it an ... is rarely according to need. Nestlé, the world’s biggest bottler, is extracting up to 3.6m litres of water daily from nearby Six Nations treaty land....', 'url': 'https://theguardian.com/global/2018/oct/04/ontario-six-nations-nestle-running-water'}, {'title': "Nestle's 'Pure Life' Water Filled With Plastic, Class Says", 'content': 'The study examined 11 top bottled water brands from Asia, Europe, Africa and North America, and found 93 percent showed some level of microplastic contamination. Nestle bottles contained 10,000 pieces of microplastics per liter, the highest level of any brand examined according to the researchers.', 'url': 'https://courthousenews.com/nestles-pure-life-water-filled-with-plastic-class-says'}, {'title': 'Eaux en bouteille : Nestlé a bien eu recours à "des traitements ...', 'content': '16 oct. 2024 — Nestlé a triché "au vu et au su" de tous en traitant avec des filtres interdits des eaux contaminées par des bactéries.', 'url': 'https://francebleu.fr/infos/environnement/eaux-en-bouteille-nestle-a-bien-eu-recours-a-des-traitements-interdits-au-vu-et-au-su-de-plusieurs-ministres-4497786'}, {'title': 'Nestlé admits to treating mineral water in breach of French law', 'content': 'The company’s bottled water ... intelligence. ... According to Le Monde, Nestlé has reportedly used disinfectants “due to sporadic bacterial or chemical contamination.”...', 'url': 'https://just-drinks.com/news/nestle-admits-to-treating-mineral-water-in-breach-of-french-law'}, {'title': 'Eaux en bouteilles du groupe Nestlé : dans le Gard, "un ...', 'content': "16 déc. 2024 — En avril dernier, la production de l'un des puits de l'usine avait été stoppée à la suite d'un épisode de contamination par des germes fécaux, ...", 'url': 'https://radiofrance.fr/franceinter/podcasts/l-info-de-france-inter/l-info-de-france-inter-7310764'}, {'title': "Nestlé subsidary Perrier destroys two million bottles of water after 'fecal' bacteria discovery | Euronews", 'content': 'Perrier has been ordered to destroy two million bottles of water after bacteria “of faecal origin” was discovered in one of its wells in Gard, in southern France. "Several batches of bottles” the equivalent of “several hundred pallets” were destroyed, according to Nestlé.', 'url': 'https://euronews.com/2024/04/24/nestle-subsidary-destroys-two-million-bottles-of-water-after-fecal-bacteria-discovery'}, {'title': "Perrier, Vittel: French brands 'illegally filtered contaminated water'", 'content': 'Water from the food and drink giant Nestlé and others was illegally filtered due to contaminated sources, an investigation has alleged, with 30% of the brands reportedly affected. The inquiry from Le Monde newspaper - and partners at and - named brands including French iconic names Perrier and Vittel.', 'url': 'https://connexionfrance.com/news/perrier-vittel-french-brands-illegally-filtered-contaminated-water/613761'}, {'title': 'Scandale des eaux minérales : Nestlé Waters a eu recours ...', 'content': '19 juil. 2024 — Fin janvier, Nestlé Waters a reconnu avoir recouru à des systèmes de désinfection interdits (lampe UV, charbon actif) pour maintenir la «sé ...', 'url': 'https://sudouest.fr/economie/scandale-des-eaux-minerales-nestle-waters-a-eu-recours-a-des-traitements-interdits-depuis-au-moins-15-ans-20618044.php'}, {'title': 'The Nestlé water management report', 'content': "Nestlé is the world's largest food & beverage company. We unlock the power of food to enhance quality of life for everyone, today and for generations to come.", 'url': 'https://nestle.com/sites/default/files/asset-library/documents/library/documents/environmental_sustainability/water-management-report-mar2007-en.pdf'}, {'title': 'Nestlé mineral water scandal: European Commission severely criticizes ...', 'content': 'In a new report, the European Commission passes a harsh judgement on the handling of the Nestlé mineral water scandal by the French authorities.', 'url': 'https://foodwatch.org/en/nestle-mineral-water-scandal-european-commission-severely-criticizes-french-authorities-in-new-audit-report'}, {'title': "Nestlé Waters sous la menace d'une grave crise de ...", 'content': "9 avr. 2024 — Un constat accablant : la contamination est généralisée. Elle serait d'origine fécale, chimique, avec la présence de Pfas. L'Agence nationale de ...", 'url': 'https://liberation.fr/economie/nestle-waters-sous-la-menace-dune-grave-crise-de-confiance-20240409_A6CY2AUVC5HMJPKM2L57GEE6ZU'}, {'title': "The fight to stop Nestlé from taking America's water to sell in plastic bottles | Water | The Guardian", 'content': 'The network of clear streams comprising California’s Strawberry Creek run down the side of a steep, rocky mountain in a national forest two hours east of Los Angeles. Last year Nestlé siphoned 45m gallons of pristine spring water from the creek and bottled it under the Arrowhead Water label.', 'url': 'https://theguardian.com/environment/2019/oct/29/the-fight-over-water-how-nestle-dries-up-us-creeks-to-sell-water-in-plastic-bottles'}, {'title': 'Scandal over illegally disinfected mineral water: foodwatch sues Nestlé', 'content': 'The international consumer organisation foodwatch has filed a lawsuit in France against the mineral water producers Nestlé Waters and Sources Alma. The companies had disinfected contaminated mineral water using illegal methods, such as UV or carbon filters, and had sold bottled tap water as mineral water. Well-known brands such as Perrier, Vittel, Vichy and Cristaline are affected. The ...', 'url': 'https://foodwatch.org/en/scandal-over-illegally-disinfected-mineral-water-foodwatch-sues-nestle'}, {'title': "Unveiling Nestlé's Environmental Impact: From Water Theft to Plastic ...", 'content': "Conclusion Nestlé's environmental impact extends far beyond its corporate boardrooms, affecting communities, ecosystems, and future generations. From allegations of water theft and exploitation to the proliferation of plastic pollution, Nestlé's practices highlight the urgent need for corporate accountability and systemic change.", 'url': 'https://zerowastecalifornia.org/2024/06/06/unveiling-nestles-environmental-impact-from-water-theft-to-plastic-pollution'}, {'title': '\u200bNestlé Water Springs Contamination: What You Need to Know - Ceres Shop', 'content': "Controversy arose in January when Nestlé Waters acknowledged the use of prohibited purification methods, including ultraviolet disinfection and activated carbon filtration, conflicting with France and EU's strict natural mineral water regulations. Although Nestlé has since discontinued these ...", 'url': 'https://ceres.shop/blog/nestl-water-springs-contamination-what-you-need-to-know'}, {'title': 'Nestle’s Perrier Destroys 2 Million Water Bottles Due to Contamination', 'content': 'Perrier, Nestle’s water subsidiary, has been forced to destroy two million bottles of its famous sparkling water due to suspected “faecal” bacteria contamination.', 'url': 'https://moroccoworldnews.com/2024/04/362389/nestles-perrier-destroys-2-million-water-bottles-due-to-contamination'}, {'title': 'Nestlé suspends part of Perrier water production in France', 'content': 'Nestlé has “temporarily suspended” a well in France that’s part of its Perrier bottled water production due to contamination.', 'url': 'https://just-drinks.com/news/nestle-suspends-part-of-perrier-water-production-in-france-due-to-contamination'}, {'title': 'Four French water brands accused of bacteria and chemical contaminants', 'content': 'An inquiry from FranceInfo and ... Régionales de Santé, ARS) of Grand Est and Occitanie (regions in which Nestlé Waters has bottling plants). The group found that the water contamination is widespread, and includes the presence of bacteria as well as ‘forever chemical’ ...', 'url': 'https://connexionfrance.com/news/four-french-water-brands-accused-of-bacteria-and-chemical-contaminants/652170'}, {'title': 'France health watchdog seeks clampdown at Nestlé water sites', 'content': 'France’s food safety watchdog has recommended stricter monitoring of sites where the Nestlé food giant extracts mineral water after traces of “faecal” contamination were found, according to a report seen by AFP.', 'url': 'https://thelocal.fr/20240405/france-health-watchdog-seeks-clampdown-at-nestle-water-sites'}, {'title': 'Spring water for Nestle drink brands may be unsafe, say French authorities', 'content': 'Swiss food giant warned of risk of faecal matter contaminants, E. coli and ‘pollutants’ after illegal purification treatment scandal emerges ... Saint-Yorre, Perrier, Vichy Celestins, Vittel, Hepar, Cristaline and Contrex water bottles from Nestle Waters Credit: JOEL SAGET/AFP', 'url': 'https://telegraph.co.uk/world-news/2024/04/04/spring-water-nestle-brands-unsafe-pollutants-france'}, {'title': 'Nestlé in hot water over Perrier and Vittel processing methods', 'content': 'Consumer watchdog foodwatch has ... bottled water division, which owns well-known brands Perrier, Vittel, Acqua Panna and San Pellegrino. Sources Alma, whose brands include Cristaline and Saint Antonin, is also in foodwatch’s firing line. “Nestlé and Co. have deceived, ripped off and defrauded consumers,” claims international campaign director Ingrid Kragl. “The companies illegally treated contaminated water and ...', 'url': 'https://foodnavigator.com/Article/2024/03/01/Nestle-faces-legal-action-over-Perrier-and-Vittel-processing-methods-in-France'}, {'title': 'Nestlé admits to treating bottled mineral water in breach of French regulations', 'content': "The world's largest food and drinks manufacturer, Nestlé, has admitted to treating bottled water products for contaminants in contravention of French legislation.", 'url': 'https://rfi.fr/en/france/20240129-nestl%C3%A9-admits-to-treating-bottled-mineral-water-in-breach-of-french-regulations'}, {'title': "Nestlé's Troubled Waters - Story of Stuff", 'content': 'About This Campaign For decades, Nestlé Waters – the world’s largest water bottler – has bought up access to public water across North America to turn our most precious public resource into a private commodity. Paying next to nothing in royalties, Nestlé makes billions of dollars a ...', 'url': 'https://storyofstuff.org/unbottle-water/nestles-troubled-waters'}]
	"""
	prompt = 'I need to write a due diligence report on Nestlé. What can you tell me about the company?'
	# [{'title': 'Nestlé: Good food, Good life | Nestlé Global', 'content': "Nestlé is the world's largest food & beverage company, offering a wide range of brands and products. Learn about its financial performance, societal commitments, innovation, nutrition and sustainability efforts.", 'url': 'https://nestle.com'}, {'title': 'Nestlé in the United States | Nestlé USA', 'content': "Nestlé Advancing Nestlé's U.S. Manufacturing Footprint The new Glendale, Arizona facility expands our capacity for creamer production to deliver for consumers across U.S. - the largest coffee market in the world.", 'url': 'https://nestleusa.com'}, {'title': 'Nestlé - Wikipedia', 'content': '3 days ago - Nestlé S.A. (/ˈnɛsleɪ, -li, -əl/ NESS-lay, -\u2060lee, -\u2060əl) is a Swiss multinational food and drink processing conglomerate corporation headquartered in Vevey, Switzerland. It has been the largest publicly held food company in the world, measured by revenue and other metrics, since 2014.', 'url': 'https://en.wikipedia.org/wiki/Nestl%C3%A9'}, {'title': 'Nestlé: Good food, Good life | Nestlé France', 'content': "Une bonne alimentation contribue à améliorer la qualité de vie de tous aujourd'hui, ainsi que celle des générations futures.", 'url': 'https://nestle.fr'}, {'title': 'Nestlé', 'content': "Nestlé (prononciation : /nɛs.le/) est une multinationale suisse fondée en 1873 par Henri Nestlé. Elle est un des plus importants acteurs de l'industrie ...", 'url': 'https://fr.wikipedia.org/wiki/Nestl%C3%A9'}, {'title': 'Our portfolio of brands - Nestlé Global', 'content': "Separately, in 1867 the young Henri Nestlé developed a breakthrough infant food to tackle high mortality rates. He started using the famous 'nest' logo around the same time - and in 1905 the company Henri founded merged with Anglo-Swiss. Read more about the history behind our brands", 'url': 'https://nestle.com/brands'}, {'title': 'About Us: This is Nestlé | Nestlé USA', 'content': 'Nestlé in the U.S. is the largest market of Nestlé S.A., offering a wide portfolio of food and beverage products for people and pets. Learn how Nestlé works, does business, and builds a sustainable future in America.', 'url': 'https://nestleusa.com/about-us'}, {'title': 'Scandale des eaux en bouteille : les sénateurs menacent ...', 'content': "il y a 4 heures — La directrice générale de Nestlé Waters était mercredi devant une commission d'enquête sénatoriale sur le scandale des eaux en bouteille.", 'url': 'https://francetvinfo.fr/sante/alimentation/scandale-des-eaux-en-bouteille-les-senateurs-menacent-nestle-de-poursuites-apres-son-refus-de-repondre-a-leurs-questions_7140720.html'}, {'title': 'Nos marques et produits', 'content': 'Nos Marques · ALIMENTS CULINAIRES & SURGELES · Aliments Culinaires, réfrigérés et surgelés · ALIMENTS POUR BEBE. Aliments pour bébé · Boissons · CAFE. Café.', 'url': 'https://nestle.fr/nosmarques'}, {'title': 'Nestlé Career Opportunities in the U.S.', 'content': 'Discover a world-class career at Nestlé USA. Learn more about job opportunities at Nestlé USA, Nestlé Purina, Nespresso, Gerber, Nestlé Health Science and more.', 'url': 'https://nestlejobs.com'}, {'title': 'About us: Everything you need to know about Nestlé - Nestlé Global', 'content': "Learn about Nestlé, the world's largest food and beverage company, and its vision, values, and sustainability goals. Discover its brands, products, and presence in 188 countries.", 'url': 'https://nestle.com/about'}, {'title': 'Bienvenue sur le site de Nestlé Suisse | Nestlé', 'content': "Découvrez Nestlé en Suisse : nos marques, nos produits, nos engagements, offres d'emploi, stages chez Nestlé, publications et bien plus.", 'url': 'https://nestle.ch/fr'}, {'title': 'Nestlé Professional | Nestlé Professional', 'content': 'Grow your operation with our culinary and beverage brands, products, systems services and expertise.', 'url': 'https://nestleprofessional.us'}, {'title': 'Scandale des eaux en bouteille : les sénateurs très agacés ...', 'content': "il y a 22 heures — « Les eaux embouteillées par Nestlé Waters France n'ont jamais présenté le moindre risque sanitaire ». Après une première salve de questions du ...", 'url': 'https://publicsenat.fr/actualites/parlementaire/scandale-des-eaux-en-bouteille-les-senateurs-tres-agaces-par-les-reponses-robotiques-de-lex-directrice-de-nestle-waters-france-2'}, {'title': 'Nestlé | LinkedIn', 'content': 'Nestlé | 15,977,361 followers on LinkedIn. As the world’s largest food and beverage company we are driven by a simple aim: unlocking the power of food to enhance quality of life for everyone, today and for generations to come. To deliver on this, we serve with passion, with a spirit of ...', 'url': 'https://linkedin.com/company/nestle-s-a-'}, {'title': 'Tous les thés en capsules - SPECIAL.T by Nestlé', 'content': "SPECIAL.T by Nestlé combine l'art de la sélection des meilleurs thés du monde et l'expertise d'une infusion parfaite pour chaque thé. Au degré et à la seconde ...", 'url': 'https://fr.special-t.com/fr/capsules-the.html'}, {'title': 'Nestlé: Good food, Good life | Nestlé Canada', 'content': "Welcome to the Nestlé Canada website! Nestlé is the world's largest food & beverage company. We unlock the power of food to enhance quality of life for everyone.", 'url': 'https://corporate.nestle.ca/en'}, {'title': "Nestlé DEI boycott starts Friday. It's different from Target's boycott", 'content': 'The Nestlé boycott begins March 21 and lasts until March 28. Nestlé produces several everyday items, including Cheerios cereal, Purina and Fancy Feast pet food, KitKat chocolate, Cerelac baby ...', 'url': 'https://usatoday.com/story/money/business/2025/03/18/nestle-dei-boycott-starts-friday/82526331007'}, {'title': 'NESTLÉ Viennois chocolat - 4x100g', 'content': 'LAIT entier (34. 2%). babeurre* (LAIT). crème (LAIT) (13. 3%). sucre. eau. chocolat (3. 5%) [pâte de cacao. sucre. émulsifiant (lécithine de tournesol).', 'url': 'https://offcourses.net/fr/desserts-et-compotes/10198-le-viennois-chocolat-3023290050378.html'}, {'title': 'Nestlé Recipes - Good Food, Good Life | Official goodNes™', 'content': 'Browse our recipes to find something simple for you, but exciting for the family, and learn more about the brands you know and love.', 'url': 'https://goodnes.com'}, {'title': "Nestlé issues voluntary recall on thousands of Stouffer's and Lean ...", 'content': "Nestlé says the recall does not involve any other Lean Cuisine or Stouffer's products. The company says customers can get a replacement or a full refund. Here is a link to Nestlé's website for ...", 'url': 'https://abc7.com/post/nestl-issues-voluntary-recall-thousands-stouffers-lean-cuisine-frozen-meals-heres-what-know/16045514'}, {'title': "Nestlé Baby: Produits d'alimentation bébé et inspiration", 'content': "Nous vous accompagnons dans la nutrition et le bien être de votre bébé au jour le jour afin d'être présent dans chaque étape importante de sa vie.", 'url': 'https://nestlebaby.be/fr'}, {'title': 'Home - Empowering Healthier Lives Through Nutrition | NHS', 'content': 'Nestlé Health Science is a leader in the field of nutritional science, committed to redefining the management of health. Read more about our range of products.', 'url': 'https://nestlehealthscience.com'}, {'title': 'Nestlé recalls 4 frozen meals after alarming choking report - Rolling Out', 'content': 'Nestlé has established a dedicated consumer response line to address concerns and questions about this recall. Customers can reach the company at (800) 681-1676, with representatives available ...', 'url': 'https://rollingout.com/2025/03/19/nestle-issues-recall-of-4-popular-frozen'}, {'title': 'Scandale des eaux minérales : La justice belge enquête à ...', 'content': "il y a 19 heures — Une perquisition a été effectuée mardi à Etalle, près d'Arlon dans le sud du pays, au sein de l'usine Valvert, une marque de Nestlé Waters.", 'url': 'https://20minutes.fr/sante/4144313-20250319-scandale-eaux-minerales-justice-belge-enquete-tour-perquisitionne-siege-nestle'}, {'title': "Nestlé Brands' Products, Recipes and News | Made With Nestlé Canada", 'content': 'We make meals and snacks that complement busy days and warm kips to savour with slow moments. We also make nutrition solutions to help you through different life stages.', 'url': 'https://madewithnestle.ca'}, {'title': 'Nestle SA | History, Headquarters, & Subsidiaries | Britannica Money', 'content': "Nestlé SA, multinational manufacturer of food products. It is headquartered in Vevey, Switzerland, and operates factories in more than 80 countries.Nestlé's chief products are condensed and powdered milk, baby foods, chocolate products, candies, instant coffees and teas, soups, seasonings and condiments, frozen foods, ice cream, and bottled water.", 'url': 'https://britannica.com/money/Nestle-SA'}, {'title': 'Nestlé (@nestle) • Instagram photos and videos', 'content': '446K Followers, 141 Following, 1,662 Posts - See Instagram photos and videos from Nestlé (@nestle)', 'url': 'https://instagram.com/nestle'}, {'title': 'Home | Nestlé Health Science USA', 'content': 'Nestle Health Science is pioneering a new field where nutrition becomes therapy. We are changing the course of health through research and innovation, and nutritional therapies. Visit the site to learn more.', 'url': 'https://nestlehealthscience.us'}, {'title': 'Sustainable Cocoa | Cocoa Cultivation | Nestlé Cocoa Plan', 'content': 'Nestlé Cocoa Plan progress: Transforming lives since 2009. Over 150,000 cocoa-farming families benefited through better farming and better cocoa initiatives.', 'url': 'https://nestlecocoaplan.com'}, {'title': 'Nestlé S.A. (NSRGY) Stock Price, News, Quote & History - Yahoo Finance', 'content': '2 days ago - Find the latest Nestlé S.A. (NSRGY) stock quote, history, news and other vital information to help you with your stock trading and investing.', 'url': 'https://finance.yahoo.com/quote/NSRGY'}, {'title': 'List of Nestlé brands - Wikipedia', 'content': "2 days ago - This is a dated list of the brands owned by Nestlé globally. Overall, Nestlé owns over 2000 brands in 186 countries. Brands in this list are categorized by their targeted markets. ... Nestlé Dibs – Produced in conjunction with Dreyer's Ice Cream. Marketed as Edy's in the midwest and eastern ...", 'url': 'https://en.wikipedia.org/wiki/List_of_Nestl%C3%A9_brands'}, {'title': 'Our Innovation Approach at Nestlé | Nestlé USA', 'content': "Discover Nestlé's innovation in providing healthy breakfast options. Start your day right with our nutritious choices.", 'url': 'https://nestleusa.com/innovation'}, {'title': 'Nestlé (@Nestle) / X', 'content': 'We cannot provide a description for this page right now', 'url': 'https://x.com/nestle?lang=en'}, {'title': 'Homepage | Nestlé Nespresso', 'content': 'Coffee is at the heart of all we do. Yet consumer pleasure is why we do it', 'url': 'https://nestle-nespresso.com'}, {'title': 'Making Breakfast Better - Choose your Location | Nestlé Cereals', 'content': 'Do you love cereal? Learn all about Nestlé Cereals. We want to make breakfast better while creating a positive impact on the world around us.', 'url': 'https://nestle-cereals.com'}]

	summarize_search_result(prompt=prompt, json_input=TEST_INPUT, stream_output=True)

if __name__ == '__main__':
	main()